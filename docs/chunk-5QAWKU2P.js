import{a as U}from"./chunk-QIYVDEIT.js";import{a as V}from"./chunk-QCRI6KXV.js";import{b as x,e as G,f as L,h as P,i as T,l as z,p as F}from"./chunk-GVASTDVW.js";import{a as $}from"./chunk-NMXXHOSR.js";import{c as B,e as N,f as R,j as M}from"./chunk-74GY5GQ5.js";import{a as q}from"./chunk-ZLFBUOKE.js";import{b as O}from"./chunk-3FEZ7P6T.js";import"./chunk-EQ3IFVHN.js";import{m as J}from"./chunk-STEM5K4J.js";import{Ib as o,Jb as m,Ka as _,Kb as g,Lb as w,Oa as r,Pa as b,Qb as A,Sb as j,Ub as h,gb as f,h as W,la as k,lb as I,nb as E,ob as C,pb as t,qb as i,rb as s,yb as v}from"./chunk-4IWQIHCA.js";var y=W($());function H(c,u){if(c&1&&(t(0,"li"),s(1,"i",48),o(2),i()),c&2){let D=u.$implicit;r(2),g(" ",D==null?null:D.reqName,"")}}var{required:S,pattern:le,maxLength:re,minLength:ae}=x,se=(()=>{let u=class u{constructor(l,n,e,a,d,p){this._activatedRoute=l,this._jobPostingService=n,this._userService=e,this._router=a,this._authService=d,this._chatService=p,this.PostApplication=new L({CV:new P("",[S]),Status:new P("",[S]),CoverLetter:new P("",[S])}),this.decodedToken=this._authService.Token}ngOnInit(){let l=this._activatedRoute.snapshot.params;this.Id=l.id,this._jobPostingService.GetJobPostById(this.Id).subscribe({next:n=>{console.log(n),this.jobPostDetails=n},error:n=>{console.log(n)}})}openMessage(l){console.log(l),this._userService.GetJobProviderByIdOrByUserName(l,"").subscribe({next:n=>{console.log(n),localStorage.setItem("JobProviderId",JSON.stringify(l))}}),console.log(this._authService.Token.name),this._userService.GetJobSeekerByUserName(this._authService.Token.name).subscribe({next:n=>{console.log(n),this._userService.GetJobSeekerById(n.id).subscribe({next:()=>{this._chatService.jobSeekerId=n.id,console.log(this._chatService.jobSeekerId),localStorage.setItem("JobSeekerId",JSON.stringify(n.id));let e=localStorage.getItem("JobSeekerId"),a=JSON.parse(e);console.log(a),this._authService.updateJobSeekerId(a)}})}}),this._router.navigate(["/chat"])}handleCV(l){let n=l.target.files[0],e=new FileReader;e.readAsDataURL(n),e.onloadend=()=>{let a=e.result;console.log(a),this.reader=a}}handleCoverLetter(l){let n=l.target.files[0],e=new FileReader;e.readAsDataURL(n),e.onloadend=()=>{let a=e.result;console.log(a),this.reader2=a}}CreateJobApplication(l){let n={cv:this.reader,status:this.PostApplication.value.Status,coverLetter:this.reader2};console.log(l),this._jobPostingService.GetJobPostById(l).subscribe({next:e=>{this.jobpost=e,console.log(e),this._userService.GetJobSeekerByUserName(this.decodedToken.name).subscribe({next:a=>{this.jobSeeker=a,this._jobPostingService.PostJobApplication(n,e.jobProvider.id,a.id,l).subscribe({next:d=>{console.log(d),this._jobPostingService.UpdateJobPostWithJobApplications(l).subscribe({next:p=>{console.log(l),console.log(p),y.default.fire({title:"Successfully Added Application",text:"Your JobApplication was created successfully",icon:"success"})},error:p=>{console.log(p)}})},error:d=>{console.log(d),y.default.fire({title:`${d.error.message}`,icon:"error"})}})}})},error:e=>{console.log(e)}}),console.log(this.jobpost)}};u.\u0275fac=function(n){return new(n||u)(b(B),b(V),b(q),b(N),b(O),b(U))},u.\u0275cmp=k({type:u,selectors:[["app-bookmark"]],standalone:!0,features:[A],decls:94,vars:23,consts:[[1,"container"],["id","JobApp","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"submit","formGroup"],[1,"form-label"],["type","file",1,"form-control",3,"change"],["type","text",1,"form-control"],["type","submit",1,"btn","btn-outline-info","mt-2"],[1,"background","w-100"],[1,"d-flex","justify-content-between"],[1,"font-sarabun"],["data-bs-toggle","modal","data-bs-target","#JobApp",1,"btn","background-btn","text-white","ms-2"],[1,"font-size-18","font-lato"],[1,"fas","fa-house","me-1"],[1,"font-lato","fw-light"],[1,"mt-1"],[1,"btn","type-btn","rounded-0"],[1,"mt-4"],[1,"font-size-16"],[1,"justify-content-between"],[1,"border","p-3"],[1,"d-flex","justify-content-between","gap-2","align-items-center"],[1,"rounded","back-orange","p-1","font-orange","font-sarabun"],[1,"font-green","btn",3,"click"],[1,"fas","fa-envelope","font-green"],[1,"font-lato","font-size-16","font-grey"],[1,"d-flex","flex-column"],[1,"mt-2"],[1,"fw-bold","font-lato","font-size-16"],[1,"font-size-16","font-lato","font-grey"],[1,"list","list-unstyled"],[1,"p-5","background-grey"],[1,"font-size-16","fw-semibold","font-lato"],[1,"font-size-14","font-lato","text-decoration-none","font-green",3,"routerLink"],[1,"d-flex","gap-2","align-items-center","my-3"],["onerror","this.src='../../../assets/Images/PlaceHolder.jpg'",1,"img-cover",3,"src","alt"],[1,"font-sarabun","font-size-18"],[1,"font-size-16","font-lato","fw-normal"],[1,"row","gy-4","font-grey","font-lato","font-size-16"],[1,"col-lg-6","col-12"],[1,"fa-solid","fa-building"],[1,"fa-solid","fa-user"],[1,"fa-solid","fa-location-dot"],[1,"fa-solid","fa-calendar"],[1,"fa-regular","fa-circle-check","check"]],template:function(n,e){n&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),s(5,"button",5),i(),t(6,"div",6)(7,"form",7),v("submit",function(){return e.CreateJobApplication(e.jobPostDetails==null?null:e.jobPostDetails.id)}),t(8,"label",8),o(9,"Upload CV"),i(),t(10,"input",9),v("change",function(d){return e.handleCV(d)}),i(),t(11,"label",8),o(12,"Status"),i(),s(13,"input",10),t(14,"label",8),o(15,"Upload Cover Letter"),i(),t(16,"input",9),v("change",function(d){return e.handleCoverLetter(d)}),i(),t(17,"button",11),o(18,"Upload Application"),i()()()()()(),s(19,"div",12),t(20,"div",13)(21,"h3",14),o(22),i(),t(23,"div")(24,"button",15),o(25,"Apply Now"),i()()(),t(26,"div",13)(27,"p",16),o(28),j(29,"currency"),j(30,"currency"),i()(),t(31,"div")(32,"div"),s(33,"i",17),t(34,"span",18),o(35),i()()(),t(36,"div",19)(37,"button",20),o(38),i()(),t(39,"div",21)(40,"h3",22),o(41,"Contact Recruiter"),i(),t(42,"div",23)(43,"div",24)(44,"div",25)(45,"div")(46,"p"),o(47),i(),t(48,"p",26),o(49,"Job Poster"),i()(),t(50,"button",27),v("click",function(){return e.openMessage(e.jobPostDetails==null||e.jobPostDetails.jobProvider==null?null:e.jobPostDetails.jobProvider.id)}),s(51,"i",28),o(52," Message"),i()(),t(53,"span",29),o(54),i()(),s(55,"div"),t(56,"div",30)(57,"div",31)(58,"h2",32),o(59,"Job Description"),i(),t(60,"p",33),o(61),i()(),t(62,"div")(63,"h2",32),o(64,"Responsibilities"),i(),t(65,"ul",34),E(66,H,3,1,"li",null,I),i()(),t(68,"div",35)(69,"div",13)(70,"h3",36),o(71,"About Company"),i(),t(72,"a",37),o(73,"View Company Profile"),i()(),t(74,"div",38),s(75,"img",39),t(76,"p",40),o(77),i()(),t(78,"p",41),o(79),i(),t(80,"div")(81,"div",42)(82,"div",43),s(83,"i",44),o(84),i(),t(85,"div",43),s(86,"i",45),o(87),i(),t(88,"div",43),s(89,"i",46),o(90),i(),t(91,"div",43),s(92,"i",47),o(93," Mon - Fri "),i()()()()()()()()),n&2&&(r(7),f("formGroup",e.PostApplication),r(15),m(e.jobPostDetails==null?null:e.jobPostDetails.title),r(6),w("",h(29,17,e.jobPostDetails==null?null:e.jobPostDetails.salaryRangeFrom,"EGP"),"-",h(30,20,e.jobPostDetails==null?null:e.jobPostDetails.salaryRangeTo,"EGP"),""),r(7),m(e.jobPostDetails==null?null:e.jobPostDetails.location),r(3),m(e.jobPostDetails==null?null:e.jobPostDetails.type),r(9),m(e.jobPostDetails==null||e.jobPostDetails.jobProvider==null?null:e.jobPostDetails.jobProvider.companyName),r(7),m(e.jobPostDetails==null||e.jobPostDetails.jobProvider==null?null:e.jobPostDetails.jobProvider.category),r(7),m(e.jobPostDetails==null?null:e.jobPostDetails.description),r(5),C(e.jobPostDetails==null?null:e.jobPostDetails.requirements),r(6),f("routerLink","/CompanyProfile/"+(e.jobPostDetails==null?null:e.jobPostDetails.jobProvider.id)),r(3),f("src",e.jobPostDetails==null||e.jobPostDetails.jobProvider==null?null:e.jobPostDetails.jobProvider.logo,_)("alt",e.jobPostDetails==null?null:e.jobPostDetails.companyName),r(2),m(e.jobPostDetails==null||e.jobPostDetails.jobProvider==null?null:e.jobPostDetails.jobProvider.companyName),r(2),m(e.jobPostDetails==null||e.jobPostDetails.jobProvider==null?null:e.jobPostDetails.jobProvider.description),r(5),g(" ",e.jobPostDetails==null||e.jobPostDetails.jobProvider==null?null:e.jobPostDetails.jobProvider.category," "),r(3),g(" ",e.jobPostDetails==null||e.jobPostDetails.jobProvider==null?null:e.jobPostDetails.jobProvider.noOfEmployees," employees "),r(3),g(" ",e.jobPostDetails==null||e.jobPostDetails.jobProvider==null?null:e.jobPostDetails.jobProvider.location," "))},dependencies:[J,M,R,F,T,G,z],styles:['.img-cover[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%}.type-btn[_ngcontent-%COMP%]{background-color:#f3f4f6}.background-btn[_ngcontent-%COMP%]{transition:background-color .5s;background-color:#0ea89b}.background-btn[_ngcontent-%COMP%]:hover{background-color:#0c988d}.background[_ngcontent-%COMP%]{background-image:url("./media/Image 21-XSBKNA3W.png");width:100%;min-height:40vh;background-position:center;background-size:contain;background-repeat:no-repeat}']});let c=u;return c})();export{se as BookmarkComponent};
