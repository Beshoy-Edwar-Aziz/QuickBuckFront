import{a as x,b as G,c as O,d as U,e as j,f as q}from"./chunk-3OSPXOK4.js";import"./chunk-5IC5DNT2.js";import{x as B,z as D}from"./chunk-BDNT75Q5.js";import{a as w,b as E,d as I,e as C,f as M,h,i as y,l as N,m as F,p as J}from"./chunk-GVASTDVW.js";import{a as $}from"./chunk-NMXXHOSR.js";import{e as b}from"./chunk-74GY5GQ5.js";import{a as T}from"./chunk-W7RIL5NL.js";import{a as k,b as P}from"./chunk-LEIOQS5Q.js";import{d as L}from"./chunk-6O6AKWEF.js";import"./chunk-STEM5K4J.js";import{Ib as s,Oa as u,Pa as d,Qb as _,eb as g,gb as c,h as V,kb as f,la as S,pb as a,qb as r,rb as p,yb as v}from"./chunk-4IWQIHCA.js";var H=V($());function z(n,l){n&1&&(a(0,"mat-hint"),s(1,"Email is required"),r())}function Y(n,l){n&1&&(a(0,"mat-hint"),s(1,"Email is invalid"),r())}function Z(n,l){n&1&&(a(0,"mat-hint"),s(1,"Password is required"),r())}function K(n,l){n&1&&(a(0,"mat-hint"),s(1,"Password is invalid"),r())}var{pattern:R,minLength:de,maxLength:pe,required:A}=E,ge=(()=>{let l=class l{constructor(m,o,t){this._authService=m,this._userService=o,this._Router=t,this.Login=new M({email:new h("",[A,R(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/)]),password:new h("",[A,R(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/)])})}handleLogin(){console.log(this.Login.value);let m={Email:this.Login.value.email,Password:this.Login.value.password};this._authService.Login(m).subscribe({next:o=>{console.log(o);let t=JSON.stringify(o.token);localStorage.setItem("Token",t),this._authService.updateToken(o.token);let i=k(o.token);console.log(i.sub),i.sub=="JobSeeker"?this._userService.GetJobSeekerByUserName(i.name).subscribe({next:e=>{console.log(e),this._authService.updateJobSeekerId(e.id),this._authService.updateUserInfo(e),this._authService.updateId(e.id),localStorage.setItem("JobSeekerId",JSON.stringify(e.id))}}):this._userService.GetJobProviderByIdOrByUserName("",i.name).subscribe({next:e=>{console.log(e),this._authService.updateJobProviderId(e.id),this._authService.updateUserInfo(e),this._authService.updateId(e.id),localStorage.setItem("JobProviderId",JSON.stringify(e.id))}}),this._Router.navigate(["/Home"])},error:o=>{console.log(o),H.default.fire({title:"UnAuthorized",text:"ReEnter Your Password Or Your Email",icon:"error"})}})}};l.\u0275fac=function(o){return new(o||l)(d(P),d(T),d(b))},l.\u0275cmp=S({type:l,selectors:[["app-login"]],standalone:!0,features:[_],decls:19,vars:4,consts:[[1,"container","shadow-lg"],[1,"row"],[1,"col-md-8","d-flex","flex-column","w-50","m-auto",3,"submit","formGroup"],["matInput","","type","text","formControlName","email","placeholder","Email",1,""],["matInput","","type","password","formControlName","password","placeholder","Password"],["mat-raised-button","",1,"btn","btn-success",3,"disabled"],[1,"col-md-4"],["src","../../../assets/Images/signin-image.jpg","alt","SignIn"]],template:function(o,t){if(o&1&&(a(0,"section",0)(1,"div",1)(2,"form",2),v("submit",function(){return t.handleLogin()}),a(3,"mat-form-field")(4,"mat-label"),s(5,"Email"),r(),p(6,"input",3),g(7,z,2,0,"mat-hint")(8,Y,2,0),r(),a(9,"mat-form-field")(10,"mat-label"),s(11,"Password"),r(),p(12,"input",4),g(13,Z,2,0,"mat-hint")(14,K,2,0),r(),a(15,"button",5),s(16,"Login"),r()(),a(17,"div",6),p(18,"img",7),r()()()),o&2){let i,e;u(2),c("formGroup",t.Login),u(5),f(7,(i=t.Login.get("email"))!=null&&i.touched&&((i=t.Login.get("email"))!=null&&i.errors)&&((i=t.Login.get("email"))!=null&&i.getError("required"))?7:(i=t.Login.get("email"))!=null&&i.touched&&((i=t.Login.get("email"))!=null&&i.errors)&&((i=t.Login.get("email"))!=null&&i.getError("pattern"))?8:-1),u(6),f(13,(e=t.Login.get("password"))!=null&&e.touched&&((e=t.Login.get("password"))!=null&&e.errors)&&((e=t.Login.get("password"))!=null&&e.getError("required"))?13:(e=t.Login.get("password"))!=null&&e.touched&&((e=t.Login.get("password"))!=null&&e.errors)&&((e=t.Login.get("password"))!=null&&e.getError("pattern"))?14:-1),u(2),c("disabled",t.Login.invalid)}},dependencies:[J,y,w,I,C,N,F,L,U,O,x,G,q,j,D,B],styles:["section[_ngcontent-%COMP%]{padding:80px 0}"]});let n=l;return n})();export{ge as LoginComponent};
